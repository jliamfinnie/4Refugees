<section ng-controller="NewMailsController">
  <!-- 
  <div class="page-header">
    <h3>Send new mail</h3>
  </div>
  -->
  <div class="col-md-12">
    <form name="mailForm" class="form-horizontal" ng-submit="create(mailForm.$valid)" novalidate>
      <fieldset>
        <div class="form-group"> 
          <button type="submit" class="btn btn-default email">Send mail</button>
        </div><br> 
        <div class="form-group" show-errors>
          <label for="title">Subject</label>
          <input name="title" type="text" ng-model="title" id="title" class="form-control" placeholder="Title" required>
          <div ng-messages="mailForm.title.$error" role="alert">
            <p class="help-block error-text" ng-message="required">Mail subject is required.</p>
          </div>
        </div>

        <div class="form-group">
          <tags-input ng-model="recipient" id="recipient" class="form-control" display-property="username" placeholder="Whom to send" replace-spaces-with-dashes="false">
            <auto-complete source="loadUsers($query)"
              min-length="0"
              load-on-focus="true"
              load-on-empty="true"
              max-results-to-show="32"
              template="my-custom-template"></auto-complete>
          </tags-input>
          <script type="text/ng-template" id="my-custom-template">
            <div class="right-panel">
              <span ng-bind-html="recipient"></span>
              <span>({{data.username}})<i></span>
            </div>
          </script>
        </div>

        <div class="form-group">
          <label for="content">Content</label>
          <textarea name="content" ng-model="content" id="content" class="form-control" cols="30" rows="10" placeholder="Content"></textarea>
        </div>
        <div class="form-group">
          <label for="replyTo">ReplyTo</label>
          <textarea name="replyTo" ng-model="replyTo" id="replyTo" class="form-control" cols="30" rows="10" placeholder="ReplyTo"></textarea>
        </div>
        <div class="form-group">
          <label for="offeringId">OfferingId</label>
          <textarea name="offeringId" ng-model="offeringId" id="offeringId" class="form-control" cols="30" rows="10" placeholder="OfferingId"></textarea>
        </div>
        <div ng-show="error" class="text-danger">
          <strong ng-bind="error"></strong>
        </div>
      </fieldset>
    </form>
  </div>
</section>
